{"version":3,"file":"user-BGUaQscX.js","sources":["../../../.svelte-kit/adapter-node/chunks/user.js"],"sourcesContent":["import { d as db } from \"./db.js\";\nasync function getUserById(id) {\n  const res = await db.query(\"select * from mt_member where id_member = $1\", [id]);\n  return res.rows[0] ?? null;\n}\nasync function getUserByEmail(email) {\n  const res = await db.query(\"select * from mt_member where email = $1\", [email]);\n  return res.rows[0] ?? null;\n}\nasync function createUser(data) {\n  try {\n    const res = await db.query(\n      \"insert into mt_member (email, email_verified, password, name, image) values ($1, $2, $3, $4, $5) returning id_member\",\n      [data.email, data.emailVerified, data.password ?? \"\", data.name, data.image]\n    );\n    return {\n      error: null,\n      data: res.rows[0] ?? null\n    };\n  } catch (error) {\n    console.log(error);\n    if (error.code == 23505) {\n      return {\n        error: \"Email sudah terdaftar\",\n        data: null\n      };\n    }\n    return {\n      error: \"Terjadi kesalahan\",\n      data: null\n    };\n  }\n}\nasync function createSession(params) {\n  try {\n    const res = await db.query(\n      \"insert into sessions (user_id, expires, session_token, type, ip, device_info, host) values ($1, $2, $3, $4, $5, $6, $7)\",\n      [\n        params.userId,\n        params.expires,\n        params.sessionToken,\n        params.type,\n        params.ip,\n        params.deviceInfo,\n        params.host\n      ]\n    );\n    return {\n      error: null,\n      data: res.rows[0] ?? null\n    };\n  } catch (error) {\n    console.log(error);\n    return {\n      error: \"Terjadi kesalahan\",\n      data: null\n    };\n  }\n}\nasync function getAccountByProvider(providerAccountId, provider) {\n  const res = await db.query(\n    \"select * from accounts a left join mt_member mm on mm.id_member = a.user_id where provider_account_id = $1 and provider = $2\",\n    [providerAccountId, provider]\n  );\n  return res.rows[0] ?? null;\n}\nexport {\n  createUser as a,\n  getUserByEmail as b,\n  createSession as c,\n  getAccountByProvider as d,\n  getUserById as g\n};\n"],"names":[],"mappings":";;AACA,eAAe,WAAW,CAAC,EAAE,EAAE;AAC/B,EAAE,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK,CAAC,8CAA8C,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACnF,EAAE,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC7B,CAAC;AACD,eAAe,cAAc,CAAC,KAAK,EAAE;AACrC,EAAE,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK,CAAC,0CAA0C,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;AAClF,EAAE,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC7B,CAAC;AACD,eAAe,UAAU,CAAC,IAAI,EAAE;AAChC,EAAE,IAAI;AACN,IAAI,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAC9B,MAAM,sHAAsH;AAC5H,MAAM,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC;AAClF,KAAK,CAAC;AACN,IAAI,OAAO;AACX,MAAM,KAAK,EAAE,IAAI;AACjB,MAAM,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI;AAC/B,KAAK,CAAC;AACN,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACvB,IAAI,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,EAAE;AAC7B,MAAM,OAAO;AACb,QAAQ,KAAK,EAAE,uBAAuB;AACtC,QAAQ,IAAI,EAAE,IAAI;AAClB,OAAO,CAAC;AACR,KAAK;AACL,IAAI,OAAO;AACX,MAAM,KAAK,EAAE,mBAAmB;AAChC,MAAM,IAAI,EAAE,IAAI;AAChB,KAAK,CAAC;AACN,GAAG;AACH,CAAC;AACD,eAAe,aAAa,CAAC,MAAM,EAAE;AACrC,EAAE,IAAI;AACN,IAAI,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAC9B,MAAM,yHAAyH;AAC/H,MAAM;AACN,QAAQ,MAAM,CAAC,MAAM;AACrB,QAAQ,MAAM,CAAC,OAAO;AACtB,QAAQ,MAAM,CAAC,YAAY;AAC3B,QAAQ,MAAM,CAAC,IAAI;AACnB,QAAQ,MAAM,CAAC,EAAE;AACjB,QAAQ,MAAM,CAAC,UAAU;AACzB,QAAQ,MAAM,CAAC,IAAI;AACnB,OAAO;AACP,KAAK,CAAC;AACN,IAAI,OAAO;AACX,MAAM,KAAK,EAAE,IAAI;AACjB,MAAM,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI;AAC/B,KAAK,CAAC;AACN,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACvB,IAAI,OAAO;AACX,MAAM,KAAK,EAAE,mBAAmB;AAChC,MAAM,IAAI,EAAE,IAAI;AAChB,KAAK,CAAC;AACN,GAAG;AACH,CAAC;AACD,eAAe,oBAAoB,CAAC,iBAAiB,EAAE,QAAQ,EAAE;AACjE,EAAE,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAC5B,IAAI,8HAA8H;AAClI,IAAI,CAAC,iBAAiB,EAAE,QAAQ,CAAC;AACjC,GAAG,CAAC;AACJ,EAAE,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC7B;;;;"}