{"version":3,"file":"2-BiblKplW.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(homepage)/_layout.server.ts.js","../../../.svelte-kit/adapter-node/nodes/2.js"],"sourcesContent":["import { e as error } from \"../../../chunks/index.js\";\nimport { g as getClientIp, B as BASE_API_URL } from \"../../../chunks/request.js\";\nimport { addDays } from \"date-fns\";\nimport { c as createSession } from \"../../../chunks/user.js\";\nimport { g as getStoreByDomain } from \"../../../chunks/store.js\";\nimport { t as themes } from \"../../../chunks/themes.js\";\nconst ID_MASTER = \"1000001\";\nconst UUID_KEY = \"uuid\";\nconst load = async ({ fetch, url, cookies, request }) => {\n  const host = url.hostname;\n  let idMember = ID_MASTER;\n  let store;\n  const storeData = await getStoreByDomain(host);\n  if (storeData && storeData.id_member) {\n    idMember = storeData.id_member;\n    store = {\n      idMember,\n      name: storeData.name,\n      description: storeData.description,\n      phone: storeData.phone,\n      email: storeData.email,\n      domain: storeData.custom_domain ?? storeData.domain,\n      logo: storeData.logo,\n      theme: storeData.theme,\n      color: storeData.color,\n      promo: [],\n      info: {\n        fb: storeData.fb,\n        tiktok: storeData.tiktok,\n        ig: storeData.ig,\n        telegram: storeData.telegram,\n        twitter: storeData.twitter\n      }\n    };\n  } else {\n    error(404, \"Store Not Found\");\n  }\n  let userId = cookies.get(UUID_KEY);\n  if (!userId) {\n    const ip = await getClientIp();\n    const expires = addDays(/* @__PURE__ */ new Date(), 1);\n    userId = crypto.randomUUID();\n    const { data: data2, error: error2 } = await createSession({\n      userId: store.idMember,\n      sessionToken: userId,\n      expires,\n      type: \"user\",\n      host,\n      ip,\n      deviceInfo: request.headers.get(\"user-agent\") ?? \"\"\n    });\n    if (error2 == null) {\n      cookies.set(UUID_KEY, userId, {\n        path: \"/\",\n        domain: url.hostname == \"localhost\" ? \"\" : host,\n        secure: true,\n        expires,\n        httpOnly: true\n      });\n    }\n  }\n  let dataTheme = store.theme;\n  const color = store.color ?? \"blue\";\n  const theme = themes[dataTheme ?? \"light\"];\n  let games = [];\n  const response = await fetch(new URL(\"/v1.0/api/produk/list-group-produk\", BASE_API_URL).href);\n  if (!response.ok) {\n    throw error(500, `HTTP Error status: ${response.status}`);\n  }\n  const data = await response.json();\n  if (data.response_code != \"00\") {\n    throw error(500, `Error get games: ${data.response_message}`);\n  }\n  const item = data.response_data;\n  if (item.length > 0) {\n    games = item.map(\n      (game) => ({\n        id: game.id_group_produk,\n        name: game.nama_group_produk,\n        image: game.img,\n        slug: game.slug\n      })\n    );\n  } else {\n    games = [];\n  }\n  const popularGames = games.slice(0, 3);\n  return {\n    color,\n    theme,\n    store,\n    games,\n    popularGames,\n    isMaster: idMember == ID_MASTER\n  };\n};\nexport {\n  load\n};\n","import * as server from '../entries/pages/(homepage)/_layout.server.ts.js';\n\nexport const index = 2;\nlet component_cache;\nexport const component = async () => component_cache ??= (await import('../entries/pages/(homepage)/_layout.svelte.js')).default;\nexport { server };\nexport const server_id = \"src/routes/(homepage)/+layout.server.ts\";\nexport const imports = [\"_app/immutable/nodes/2.CyCPnmHP.js\",\"_app/immutable/chunks/scheduler.CcfLnVM_.js\",\"_app/immutable/chunks/index.B-0vqY2A.js\",\"_app/immutable/chunks/each.DAmsSjCb.js\",\"_app/immutable/chunks/index.CDqIpYcz.js\",\"_app/immutable/chunks/swiper-element-bundle.DIkDjTNm.js\",\"_app/immutable/chunks/general.ChbU9oPy.js\",\"_app/immutable/chunks/index.DYWfvrca.js\",\"_app/immutable/chunks/x.DsXVHaqw.js\",\"_app/immutable/chunks/spread.CgU5AtxT.js\",\"_app/immutable/chunks/Icon.BWg40YSe.js\",\"_app/immutable/chunks/crown.DceQQoCq.js\"];\nexport const stylesheets = [\"_app/immutable/assets/2.B5i__Hu-.css\"];\nexport const fonts = [];\n"],"names":[],"mappings":"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"}