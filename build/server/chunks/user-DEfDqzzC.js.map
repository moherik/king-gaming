{"version":3,"file":"user-DEfDqzzC.js","sources":["../../../.svelte-kit/adapter-node/chunks/user.js"],"sourcesContent":["import { d as db } from \"./db.js\";\nconst User = {\n  getUserById: async (id) => {\n    const res = await db.query(\"select * from mt_member where id_member = $1\", [id]);\n    return res.rows[0] ?? null;\n  },\n  getUserByEmail: async (email) => {\n    const res = await db.query(\"select * from mt_member where email = $1\", [email]);\n    return res.rows[0] ?? null;\n  },\n  createUser: async (data) => {\n    try {\n      const res = await db.query(\n        \"insert into mt_member (email, email_verified, password, name, image) values ($1, $2, $3, $4, $5) returning id_member\",\n        [data.email, data.emailVerified, data.password ?? \"\", data.name, data.image]\n      );\n      return {\n        error: null,\n        data: res.rows[0] ?? null\n      };\n    } catch (error) {\n      console.log(error);\n      if (error.code == 23505) {\n        return {\n          error: \"Email sudah terdaftar\",\n          data: null\n        };\n      }\n      return {\n        error: \"Terjadi kesalahan\",\n        data: null\n      };\n    }\n  },\n  createSession: async (params) => {\n    try {\n      const res = await db.query(\n        \"insert into sessions (user_id, expires, session_token, type, ip, device_info) values ($1, $2, $3, $4, $5, $6)\",\n        [\n          params.userId,\n          params.expires,\n          params.sessionToken,\n          params.type,\n          params.ip,\n          params.deviceInfo\n        ]\n      );\n      return {\n        error: null,\n        data: res.rows[0] ?? null\n      };\n    } catch (error) {\n      console.log(error);\n      return {\n        error: \"Terjadi kesalahan\",\n        data: null\n      };\n    }\n  },\n  getAccountByProvider: async (providerAccountId, provider) => {\n    const res = await db.query(\n      \"select * from accounts a left join mt_member mm on mm.id_member = a.user_id where provider_account_id = $1 and provider = $2\",\n      [providerAccountId, provider]\n    );\n    return res.rows[0] ?? null;\n  }\n};\nexport {\n  User as U\n};\n"],"names":[],"mappings":";;AACK,MAAC,IAAI,GAAG;AACb,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK;AAC7B,IAAI,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK,CAAC,8CAA8C,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;AACrF,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC/B,GAAG;AACH,EAAE,cAAc,EAAE,OAAO,KAAK,KAAK;AACnC,IAAI,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK,CAAC,0CAA0C,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;AACpF,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC/B,GAAG;AACH,EAAE,UAAU,EAAE,OAAO,IAAI,KAAK;AAC9B,IAAI,IAAI;AACR,MAAM,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAChC,QAAQ,sHAAsH;AAC9H,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,QAAQ,IAAI,EAAE,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,KAAK,CAAC;AACpF,OAAO,CAAC;AACR,MAAM,OAAO;AACb,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI;AACjC,OAAO,CAAC;AACR,KAAK,CAAC,OAAO,KAAK,EAAE;AACpB,MAAM,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACzB,MAAM,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,EAAE;AAC/B,QAAQ,OAAO;AACf,UAAU,KAAK,EAAE,uBAAuB;AACxC,UAAU,IAAI,EAAE,IAAI;AACpB,SAAS,CAAC;AACV,OAAO;AACP,MAAM,OAAO;AACb,QAAQ,KAAK,EAAE,mBAAmB;AAClC,QAAQ,IAAI,EAAE,IAAI;AAClB,OAAO,CAAC;AACR,KAAK;AACL,GAAG;AACH,EAAE,aAAa,EAAE,OAAO,MAAM,KAAK;AACnC,IAAI,IAAI;AACR,MAAM,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAChC,QAAQ,+GAA+G;AACvH,QAAQ;AACR,UAAU,MAAM,CAAC,MAAM;AACvB,UAAU,MAAM,CAAC,OAAO;AACxB,UAAU,MAAM,CAAC,YAAY;AAC7B,UAAU,MAAM,CAAC,IAAI;AACrB,UAAU,MAAM,CAAC,EAAE;AACnB,UAAU,MAAM,CAAC,UAAU;AAC3B,SAAS;AACT,OAAO,CAAC;AACR,MAAM,OAAO;AACb,QAAQ,KAAK,EAAE,IAAI;AACnB,QAAQ,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI;AACjC,OAAO,CAAC;AACR,KAAK,CAAC,OAAO,KAAK,EAAE;AACpB,MAAM,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACzB,MAAM,OAAO;AACb,QAAQ,KAAK,EAAE,mBAAmB;AAClC,QAAQ,IAAI,EAAE,IAAI;AAClB,OAAO,CAAC;AACR,KAAK;AACL,GAAG;AACH,EAAE,oBAAoB,EAAE,OAAO,iBAAiB,EAAE,QAAQ,KAAK;AAC/D,IAAI,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAC9B,MAAM,8HAA8H;AACpI,MAAM,CAAC,iBAAiB,EAAE,QAAQ,CAAC;AACnC,KAAK,CAAC;AACN,IAAI,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC/B,GAAG;AACH;;;;"}