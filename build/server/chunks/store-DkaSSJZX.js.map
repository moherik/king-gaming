{"version":3,"file":"store-DkaSSJZX.js","sources":["../../../.svelte-kit/adapter-node/chunks/store.js"],"sourcesContent":["import { d as db } from \"./db.js\";\nasync function getStoreByMember(memberId) {\n  const res = await db.query(\n    \"select * from mt_store s left join mt_store_info msi on msi.id_store = s.id where id_member = $1\",\n    [memberId]\n  );\n  return res.rows[0] ?? null;\n}\nasync function createStore(data) {\n  try {\n    const res = await db.query(\n      \"insert into mt_store (id_member, name, description, email, phone, domain) values ($1, $2, $3, $4, $5, $6) returning id\",\n      [data.memberId, data.name, data.description, data.email, data.phone, data.domain]\n    );\n    return {\n      error: null,\n      data: res.rows[0] ?? null\n    };\n  } catch (error) {\n    console.log(error);\n    if (error.code == 23505) {\n      return {\n        error: \"Domain sudah terdaftar\",\n        data: null\n      };\n    }\n    return {\n      error: \"Terjadi kesalahan\",\n      data: null\n    };\n  }\n}\nasync function getStoreByDomain(host) {\n  const res = await db.query(\n    \"select * from mt_store ms left join mt_store_info msi on msi.id_store = ms.id where domain = $1 or custom_domain = $1 limit 1\",\n    [host]\n  );\n  return res.rows[0] ?? null;\n}\nexport {\n  getStoreByDomain as a,\n  createStore as c,\n  getStoreByMember as g\n};\n"],"names":[],"mappings":";;AACA,eAAe,gBAAgB,CAAC,QAAQ,EAAE;AAC1C,EAAE,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAC5B,IAAI,kGAAkG;AACtG,IAAI,CAAC,QAAQ,CAAC;AACd,GAAG,CAAC;AACJ,EAAE,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC7B,CAAC;AACD,eAAe,WAAW,CAAC,IAAI,EAAE;AACjC,EAAE,IAAI;AACN,IAAI,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAC9B,MAAM,wHAAwH;AAC9H,MAAM,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,MAAM,CAAC;AACvF,KAAK,CAAC;AACN,IAAI,OAAO;AACX,MAAM,KAAK,EAAE,IAAI;AACjB,MAAM,IAAI,EAAE,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI;AAC/B,KAAK,CAAC;AACN,GAAG,CAAC,OAAO,KAAK,EAAE;AAClB,IAAI,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AACvB,IAAI,IAAI,KAAK,CAAC,IAAI,IAAI,KAAK,EAAE;AAC7B,MAAM,OAAO;AACb,QAAQ,KAAK,EAAE,wBAAwB;AACvC,QAAQ,IAAI,EAAE,IAAI;AAClB,OAAO,CAAC;AACR,KAAK;AACL,IAAI,OAAO;AACX,MAAM,KAAK,EAAE,mBAAmB;AAChC,MAAM,IAAI,EAAE,IAAI;AAChB,KAAK,CAAC;AACN,GAAG;AACH,CAAC;AACD,eAAe,gBAAgB,CAAC,IAAI,EAAE;AACtC,EAAE,MAAM,GAAG,GAAG,MAAM,EAAE,CAAC,KAAK;AAC5B,IAAI,+HAA+H;AACnI,IAAI,CAAC,IAAI,CAAC;AACV,GAAG,CAAC;AACJ,EAAE,OAAO,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC;AAC7B;;;;"}